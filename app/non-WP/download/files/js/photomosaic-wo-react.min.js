/*
PhotoMosaic v2.9
Friday, September 19, 2014 1:44:33 AM EDT
ReactJS CDN : //cdnjs.cloudflare.com/ajax/libs/react/0.11.2/react.min.js
*/

!function(a,b){function c(a,c){for(var d=a.split("."),e=b,f=0;f<d.length;f++)"undefined"==typeof e[d[f]]&&(e[d[f]]=c?c:{}),e=e[d[f]]}a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return b},c("PhotoMosaic.$",a||{}),c("PhotoMosaic.Utils"),c("PhotoMosaic.Inputs"),c("PhotoMosaic.Loader"),c("PhotoMosaic.Layouts"),c("PhotoMosaic.Plugins"),c("PhotoMosaic.ErrorChecks"),c("PhotoMosaic.Mosaics",[]),c("PhotoMosaic.version","2.9")}(jQuery,window),function(a){a.PhotoMosaic.Plugins.Modernizr=function(a,b,c){function d(a){s.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&s[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+v.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+w.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.8.3",n={},o=!0,p=b.documentElement,q="modernizr",r=b.createElement(q),s=r.style,t=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),u="Webkit Moz O ms",v=u.split(" "),w=u.toLowerCase().split(" "),x={},y=[],z=y.slice,A={}.hasOwnProperty;l=e(A,"undefined")||e(A.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=z.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(z.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(z.call(arguments)))};return d}),x.csstransforms=function(){return!!i("transform")},x.csstransitions=function(){return i("transition")};for(var B in x)l(x,B)&&(k=B.toLowerCase(),n[k]=x[B](),y.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof o&&o&&(p.className+=" PM_"+(b?"":"no-")+a),n[a]=b}return n},d(""),r=j=null,n._version=m,n._prefixes=t,n._domPrefixes=w,n._cssomPrefixes=v,n.testProp=function(a){return g([a])},n.testAllProps=i,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(o?" PM_js PM_"+y.join(" PM_")+" ":""),n}(this,this.document)}(window),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.EventEmitter=a}.call(this),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):a.eventie=f}(this),function(a,b){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("eventEmitter"),require("eventie")):a.PhotoMosaic.Plugins.imagesLoaded=b(a,a.EventEmitter,a.eventie)}(this,function(a,b,c){function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a){return"[object Array]"===m.call(a)}function f(a){var b=[];if(e(a))b=a;else if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else b.push(a);return b}function g(a,b,c){if(!(this instanceof g))return new g(a,b);"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=f(a),this.options=d({},this.options),"function"==typeof b?c=b:d(this.options,b),c&&this.on("always",c),this.getImages(),j&&(this.jqDeferred=new j.Deferred);var e=this;setTimeout(function(){e.check()})}function h(a){this.img=a}function i(a){this.src=a,n[a]=this}var j=a.jQuery,k=a.console,l="undefined"!=typeof k,m=Object.prototype.toString;g.prototype=new b,g.prototype.options={},g.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);for(var d=c.querySelectorAll("img"),e=0,f=d.length;f>e;e++){var g=d[e];this.addImage(g)}}},g.prototype.addImage=function(a){var b=new h(a);this.images.push(b)},g.prototype.check=function(){function a(a,e){return b.options.debug&&l&&k.log("confirm",a,e),b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;if(this.hasAnyBroken=!1,!d)return void this.complete();for(var e=0;d>e;e++){var f=this.images[e];f.on("confirm",a),f.check()}},g.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})},g.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},j&&(j.fn.imagesLoaded=function(a,b){var c=new g(this,a,b);return c.jqDeferred.promise(j(this))}),h.prototype=new b,h.prototype.check=function(){var a=n[this.img.src]||new i(this.img.src);if(a.isConfirmed)return void this.confirm(a.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var b=this;a.on("confirm",function(a,c){return b.confirm(a.isLoaded,c),!0}),a.check()},h.prototype.confirm=function(a,b){this.isLoaded=a,this.emit("confirm",this,b)};var n={};return i.prototype=new b,i.prototype.check=function(){if(!this.isChecked){var a=new Image;c.bind(a,"load",this),c.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},i.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.unbindProxyEvents=function(a){c.unbind(a.target,"load",this),c.unbind(a.target,"error",this)},g}),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},b=[].slice;!function(a,b){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(c){return b(c,a)}):b(a.jQuery,a)}(window,function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return e=c(d),l=a.call(d,"ontouchstart")>=0,h={horizontal:{},vertical:{}},i=1,k={},j="waypoints-context-id",o="resize.waypoints_pm",p="scroll.waypoints_pm",q=1,r="waypoints-waypoint-ids",s="waypoint",t="waypoints",f=function(){function a(a){var b=this;this.$element=a,this.element=a[0],this.didResize=!1,this.didScroll=!1,this.id="context"+i++,this.oldScroll={x:a.scrollLeft(),y:a.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[j]=this.id,k[this.id]=this,a.bind(p,function(){var a;return b.didScroll||l?void 0:(b.didScroll=!0,a=function(){return b.doScroll(),b.didScroll=!1},d.setTimeout(a,c[t].settings.scrollThrottle))}),a.bind(o,function(){var a;return b.didResize?void 0:(b.didResize=!0,a=function(){return c[t]("refresh"),b.didResize=!1},d.setTimeout(a,c[t].settings.resizeThrottle))})}return a.prototype.doScroll=function(){var a,b=this;return a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!l||a.vertical.oldScroll&&a.vertical.newScroll||c[t]("refresh"),c.each(a,function(a,d){var e,f,g;return g=[],f=d.newScroll>d.oldScroll,e=f?d.forward:d.backward,c.each(b.waypoints[a],function(a,b){var c,e;return d.oldScroll<(c=b.offset)&&c<=d.newScroll?g.push(b):d.newScroll<(e=b.offset)&&e<=d.oldScroll?g.push(b):void 0}),g.sort(function(a,b){return a.offset-b.offset}),f||g.reverse(),c.each(g,function(a,b){return b.options.continuous||a===g.length-1?b.trigger([e]):void 0})}),this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},a.prototype.refresh=function(){var a,b,d,e=this;return d=c.isWindow(this.element),b=this.$element.offset(),this.doScroll(),a={horizontal:{contextOffset:d?0:b.left,contextScroll:d?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:d?0:b.top,contextScroll:d?0:this.oldScroll.y,contextDimension:d?c[t]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},c.each(a,function(a,b){return c.each(e.waypoints[a],function(a,d){var e,f,g,h,i;return e=d.options.offset,g=d.offset,f=c.isWindow(d.element)?0:d.$element.offset()[b.offsetProp],c.isFunction(e)?e=e.apply(d.element):"string"==typeof e&&(e=parseFloat(e),d.options.offset.indexOf("%")>-1&&(e=Math.ceil(b.contextDimension*e/100))),d.offset=f-b.contextOffset+b.contextScroll-e,d.options.onlyOnScroll&&null!=g||!d.enabled?void 0:null!==g&&g<(h=b.oldScroll)&&h<=d.offset?d.trigger([b.backward]):null!==g&&g>(i=b.oldScroll)&&i>=d.offset?d.trigger([b.forward]):null===g&&b.oldScroll>=d.offset?d.trigger([b.forward]):void 0})})},a.prototype.checkEmpty=function(){return c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([o,p].join(" ")),delete k[this.id]):void 0},a}(),g=function(){function a(a,b,d){var e,f;"bottom-in-view"===d.offset&&(d.offset=function(){var a;return a=c[t]("viewportHeight"),c.isWindow(b.element)||(a=b.$element.height()),a-c(this).outerHeight()}),this.$element=a,this.element=a[0],this.axis=d.horizontal?"horizontal":"vertical",this.callback=d.handler,this.context=b,this.enabled=d.enabled,this.id="waypoints"+q++,this.offset=null,this.options=d,b.waypoints[this.axis][this.id]=this,h[this.axis][this.id]=this,e=null!=(f=this.element[r])?f:[],e.push(this.id),this.element[r]=e}return a.prototype.trigger=function(a){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,a),this.options.triggerOnce?this.destroy():void 0):void 0},a.prototype.disable=function(){return this.enabled=!1},a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},a.prototype.destroy=function(){return delete h[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},a.getWaypointsByElement=function(a){var b,d;return(d=a[r])?(b=c.extend({},h.horizontal,h.vertical),c.map(d,function(a){return b[a]})):[]},a}(),n={init:function(a,b){var d;return b=c.extend({},c.fn[s].defaults,b),null==(d=b.handler)&&(b.handler=a),this.each(function(){var a,d,e,h;return a=c(this),e=null!=(h=b.context)?h:c.fn[s].defaults.context,c.isWindow(e)||(e=a.closest(e)),e=c(e),d=k[e[0][j]],d||(d=new f(e)),new g(a,d,b)}),c[t]("refresh"),this},disable:function(){return n._invoke.call(this,"disable")},enable:function(){return n._invoke.call(this,"enable")},destroy:function(){return n._invoke.call(this,"destroy")},prev:function(a,b){return n._traverse.call(this,a,b,function(a,b,c){return b>0?a.push(c[b-1]):void 0})},next:function(a,b){return n._traverse.call(this,a,b,function(a,b,c){return b<c.length-1?a.push(c[b+1]):void 0})},_traverse:function(a,b,e){var f,g;return null==a&&(a="vertical"),null==b&&(b=d),g=m.aggregate(b),f=[],this.each(function(){var b;return b=c.inArray(this,g[a]),e(f,b,g[a])}),this.pushStack(f)},_invoke:function(a){return this.each(function(){var b;return b=g.getWaypointsByElement(this),c.each(b,function(b,c){return c[a](),!0})}),this}},c.fn[s]=function(){var a,d;return d=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],n[d]?n[d].apply(this,a):c.isFunction(d)?n.init.apply(this,arguments):c.isPlainObject(d)?n.init.apply(this,[null,d]):c.error(d?"The "+d+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},c.fn[s].defaults={context:d,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},m={refresh:function(){return c.each(k,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return null!=(a=d.innerHeight)?a:e.height()},aggregate:function(a){var b,d,e;return b=h,a&&(b=null!=(e=k[c(a)[0][j]])?e.waypoints:void 0),b?(d={horizontal:[],vertical:[]},c.each(d,function(a,e){return c.each(b[a],function(a,b){return e.push(b)}),e.sort(function(a,b){return a.offset-b.offset}),d[a]=c.map(e,function(a){return a.element}),d[a]=c.unique(d[a])}),d):[]},above:function(a){return null==a&&(a=d),m._filter(a,"vertical",function(a,b){return b.offset<=a.oldScroll.y})},below:function(a){return null==a&&(a=d),m._filter(a,"vertical",function(a,b){return b.offset>a.oldScroll.y})},left:function(a){return null==a&&(a=d),m._filter(a,"horizontal",function(a,b){return b.offset<=a.oldScroll.x})},right:function(a){return null==a&&(a=d),m._filter(a,"horizontal",function(a,b){return b.offset>a.oldScroll.x})},enable:function(){return m._invoke("enable")},disable:function(){return m._invoke("disable")},destroy:function(){return m._invoke("destroy")},extendFn:function(a,b){return n[a]=b},_invoke:function(a){var b;return b=c.extend({},h.vertical,h.horizontal),c.each(b,function(b,c){return c[a](),!0})},_filter:function(a,b,d){var e,f;return(e=k[c(a)[0][j]])?(f=[],c.each(e.waypoints[b],function(a,b){return d(e,b)?f.push(b):void 0}),f.sort(function(a,b){return a.offset-b.offset}),c.map(f,function(a){return a.element})):[]}},c[t]=function(){var a,c;return c=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],m[c]?m[c].apply(null,a):m.aggregate.call(null,c)},c[t].settings={resizeThrottle:100,scrollThrottle:30},e.on("load.waypoints",function(){return c[t]("refresh")})})}.call(this),function(a){function b(){var a=location.href;return hashtag=-1!==a.indexOf("#prettyPhoto")?decodeURI(a.substring(a.indexOf("#prettyPhoto")+1,a.length)):!1}function c(){"undefined"!=typeof theRel&&(location.hash=theRel+"/"+rel_index+"/")}function d(){-1!==location.href.indexOf("#prettyPhoto")&&(location.hash="prettyPhoto")}function e(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)",d=new RegExp(c),e=d.exec(b);return null==e?"":e[1]}a.prettyPhoto={version:"3.1.5"},a.fn.prettyPhoto=function(f){function g(){a(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(A/2-r.containerHeight/2),0>projectedTop&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:r.contentHeight,width:r.contentWidth},settings.animation_speed);var b=B/2-r.containerWidth/2;$pp_pic_holder.animate({top:projectedTop,left:0>b?0:b,width:r.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(r.height).width(r.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==l(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(r.resized?a("a.pp_expand,a.pp_contract").show():a("a.pp_expand").hide()),!settings.autoplay_slideshow||x||s||a.prettyPhoto.startSlideshow(),settings.changepicturecallback(),s=!0}),p(),f.ajaxcallback()}function h(b){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){a(".pp_loaderIcon").show(),b()})}function i(b){b>1?a(".pp_nav").show():a(".pp_nav").hide()}function j(a,b){if(resized=!1,k(a,b),imageWidth=a,imageHeight=b,(w>B||v>A)&&doresize&&settings.allow_resize&&!z){for(resized=!0,fitting=!1;!fitting;)w>B?(imageWidth=B-100,imageHeight=b/a*imageWidth):v>A?(imageHeight=A-100,imageWidth=a/b*imageHeight):fitting=!0,v=imageHeight,w=imageWidth;(w>B||v>A)&&j(w,v),k(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(v),containerWidth:Math.floor(w)+2*settings.horizontal_padding,contentHeight:Math.floor(t),contentWidth:Math.floor(u),resized:resized}}function k(b,c){b=parseFloat(b),c=parseFloat(c),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(b),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(b).appendTo(a("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=34>=detailsHeight?36:detailsHeight,$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(b),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(a("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),t=c+detailsHeight,u=b,v=t+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),w=b}function l(a){var b=a.split("?")[0];return a.match(/youtube\.com\/watch/i)||a.match(/youtu\.be/i)?"youtube":a.match(/vimeo\.com/i)?"vimeo":a.match(/\b.mov\b/i)?"quicktime":a.match(/\b.swf\b/i)?"flash":a.match(/\bajax=true\b/i)?"ajax":a.match(/\bcustom=true\b/i)?"custom":"#"==a.substr(0,1)?"inline":a.match(/\biframe=true\b/i)||!b.match(/\.(gif|jpg|jpeg|tiff|png)$/i)?"iframe":"image"}function m(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=n(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=A/2+scroll_pos.scrollTop-contentHeight/2,0>projectedTop&&(projectedTop=0),contentHeight>A)return;$pp_pic_holder.css({top:projectedTop,left:B/2+scroll_pos.scrollLeft-contentwidth/2})}}function n(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function o(){A=a(window).height(),B=a(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(a(document).height()).width(B)}function p(){isSet&&settings.overlay_gallery&&"image"==l(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((r.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,a.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function q(){if(settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href))),settings.markup=settings.markup.replace("{pp_social}",""),a("body").append(settings.markup),$pp_pic_holder=a(".pp_pic_holder"),$ppt=a(".ppt"),$pp_overlay=a("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var b=0;b<pp_images.length;b++)pp_images[b].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[b]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=a(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return a.prettyPhoto.changeGalleryPage("next"),a.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return a.prettyPhoto.changeGalleryPage("previous"),a.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_gallery_li.each(function(b){a(this).find("a").click(function(){return a.prettyPhoto.changePage(b),a.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return a.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:a(document).height(),width:a(window).width()}).bind("click",function(){settings.modal||a.prettyPhoto.close()}),a("a.pp_close").bind("click",function(){return a.prettyPhoto.close(),!1}),settings.allow_expand&&a("a.pp_expand").bind("click",function(){return a(this).hasClass("pp_expand")?(a(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(a(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),h(function(){a.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return a.prettyPhoto.changePage("previous"),a.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return a.prettyPhoto.changePage("next"),a.prettyPhoto.stopSlideshow(),!1}),m()}f=a.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder">                         <div class="ppt">&nbsp;</div>                         <div class="pp_top">                             <div class="pp_left"></div>                             <div class="pp_middle"></div>                             <div class="pp_right"></div>                         </div>                         <div class="pp_content_container">                             <div class="pp_left">                             <div class="pp_right">                                 <div class="pp_content">                                     <div class="pp_loaderIcon"></div>                                     <div class="pp_fade">                                         <a href="#" class="pp_expand" title="Expand the image">Expand</a>                                         <div class="pp_hoverContainer">                                             <a class="pp_next" href="#">next</a>                                             <a class="pp_previous" href="#">previous</a>                                         </div>                                         <div id="pp_full_res"></div>                                         <div class="pp_details">                                             <div class="pp_nav">                                                 <a href="#" class="pp_arrow_previous">Previous</a>                                                 <p class="currentTextHolder">0/0</p>                                                 <a href="#" class="pp_arrow_next">Next</a>                                             </div>                                             <p class="pp_description"></p>                                             <div class="pp_social">{pp_social}</div>                                             <a class="pp_close" href="#">Close</a>                                         </div>                                     </div>                                 </div>                             </div>                             </div>                         </div>                         <div class="pp_bottom">                             <div class="pp_left"></div>                             <div class="pp_middle"></div>                             <div class="pp_right"></div>                         </div>                     </div>                     <div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery">                                 <a href="#" class="pp_arrow_previous">Previous</a>                                 <div>                                     <ul>                                         {gallery}                                     </ul>                                 </div>                                 <a href="#" class="pp_arrow_next">Next</a>                             </div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},f);var r,s,t,u,v,w,x,y=this,z=!1,A=a(window).height(),B=a(window).width();return doresize=!0,scroll_pos=n(),a(window).unbind("resize.pm-prettyphoto").bind("resize.pm-prettyphoto",function(){m(),o()}),f.keyboard_shortcuts&&a(document).unbind("keydown.pm-prettyphoto").bind("keydown.pm-prettyphoto",function(b){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(b.keyCode){case 37:a.prettyPhoto.changePage("previous"),b.preventDefault();break;case 39:a.prettyPhoto.changePage("next"),b.preventDefault();break;case 27:settings.modal||a.prettyPhoto.close(),b.preventDefault()}}),a.prettyPhoto.initialize=function(){return settings=f,"pp_default"==settings.theme&&(settings.horizontal_padding=16),theRel=a(this).attr(settings.hook),galleryRegExp=/\[(?:.*)\]/,isSet=galleryRegExp.exec(theRel)?!0:!1,pp_images=isSet?a.map(y,function(b){return-1!=a(b).attr(settings.hook).indexOf(theRel)?a(b).attr("href"):void 0}):a.makeArray(a(this).attr("href")),pp_titles=isSet?a.map(y,function(b){return-1!=a(b).attr(settings.hook).indexOf(theRel)?a(b).find("img").attr("alt")?a(b).find("img").attr("alt"):"":void 0}):a.makeArray(a(this).find("img").attr("alt")),pp_descriptions=isSet?a.map(y,function(b){return-1!=a(b).attr(settings.hook).indexOf(theRel)?a(b).attr("title")?a(b).attr("title"):"":void 0}):a.makeArray(a(this).attr("title")),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=a.inArray(a(this).attr("href"),pp_images),rel_index=isSet?set_position:a("a["+settings.hook+"^='"+theRel+"']").index(a(this)),q(this),settings.allow_resize&&a(window).bind("scroll.pm-prettyphoto",function(){m()}),a.prettyPhoto.open(),!1},a.prettyPhoto.open=function(b){return"undefined"==typeof settings&&(settings=f,pp_images=a.makeArray(arguments[0]),pp_titles=a.makeArray(arguments[1]?arguments[1]:""),pp_descriptions=a.makeArray(arguments[2]?arguments[2]:""),isSet=pp_images.length>1?!0:!1,set_position=arguments[3]?arguments[3]:0,q(b.target)),settings.hideflash&&a("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),i(a(pp_images).size()),a(".pp_loaderIcon").show(),settings.deeplinking&&c(),settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href)),$pp_pic_holder.find(".pp_social").html(facebook_like_link)),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+a(pp_images).size()),"undefined"!=typeof pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(e("width",pp_images[set_position]))?e("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(e("height",pp_images[set_position]))?e("height",pp_images[set_position]):settings.default_height.toString(),z=!1,-1!=movie_height.indexOf("%")&&(movie_height=parseFloat(a(window).height()*parseFloat(movie_height)/100-150),z=!0),-1!=movie_width.indexOf("%")&&(movie_width=parseFloat(a(window).width()*parseFloat(movie_width)/100-150),z=!0),$pp_pic_holder.fadeIn(function(){switch($ppt.html(settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?unescape(pp_titles[set_position]):"&nbsp;"),imgPreloader="",skipInjection=!1,l(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<a(pp_images).size()-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){r=j(imgPreloader.width,imgPreloader.height),g()
},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),a.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":r=j(movie_width,movie_height),movie_id=e("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="http://www.youtube.com/embed/"+movie_id,movie+=e("rel",pp_images[set_position])?"?rel="+e("rel",pp_images[set_position]):"?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":r=j(movie_width,movie_height),movie_id=pp_images[set_position];var b=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/,c=movie_id.match(b);movie="http://player.vimeo.com/video/"+c[3]+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=r.width+"/embed/?moog_width="+r.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,r.height).replace(/{path}/g,movie);break;case"quicktime":r=j(movie_width,movie_height),r.height+=15,r.contentHeight+=15,r.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":r=j(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":r=j(movie_width,movie_height),frame_url=pp_images[set_position],0!==frame_url.indexOf("?")&&-1!==frame_url.indexOf("iframe")&&(frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1)),toInject=settings.iframe_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,r=j(movie_width,movie_height),doresize=!0,skipInjection=!0,a.get(pp_images[set_position],function(a){toInject=settings.inline_markup.replace(/{content}/g,a),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,g()});break;case"custom":r=j(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=a(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(a("body")).show(),doresize=!1,r=j(a(myClone).width(),a(myClone).height()),doresize=!0,a(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,a(pp_images[set_position]).html())}imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,g())}),!1},a.prettyPhoto.changePage=function(b){currentGalleryPage=0,"previous"==b?(set_position--,0>set_position&&(set_position=a(pp_images).size()-1)):"next"==b?(set_position++,set_position>a(pp_images).size()-1&&(set_position=0)):set_position=b,rel_index=set_position,doresize||(doresize=!0),settings.allow_expand&&a(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),h(function(){a.prettyPhoto.open()})},a.prettyPhoto.changeGalleryPage=function(a){"next"==a?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==a?(currentGalleryPage--,0>currentGalleryPage&&(currentGalleryPage=totalPage)):currentGalleryPage=a,slide_speed="next"==a||"previous"==a?settings.animation_speed:0,slide_to=currentGalleryPage*itemsPerPage*itemWidth,$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},a.prettyPhoto.startSlideshow=function(){"undefined"==typeof x?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return a.prettyPhoto.stopSlideshow(),!1}),x=setInterval(a.prettyPhoto.startSlideshow,settings.slideshow)):a.prettyPhoto.changePage("next")},a.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return a.prettyPhoto.startSlideshow(),!1}),clearInterval(x),x=void 0},a.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(a.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),a("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){a(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){settings.hideflash&&a("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),a(this).remove(),a(window).unbind("scroll.pm-prettyphoto"),d(),settings.callback(),doresize=!0,s=!1,delete settings}))},!pp_alreadyInitialized&&b()&&(pp_alreadyInitialized=!0,hashIndex=b(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout(function(){a("a["+f.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)),this.unbind("click.pm-prettyphoto").bind("click.pm-prettyphoto",a.prettyPhoto.initialize)}}(window.jQuery||jQuery);var pp_alreadyInitialized=!1;PhotoMosaic.Utils=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return{log:{info:function(a){this.prefix(a)},error:function(a){this.prefix("ERROR: "+a)},prefix:function(a){this.print("PhotoMosaic: "+a)},print:function(a){void 0!==window.console&&window.console.log(a)}},makeID:function(b,c){return c=c?c+"_":"",b?c+a()+a()+""+a()+a():c+(a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a())},deepSearch:function(a,b,c){var d,e=null,f=0;if(a instanceof Array){for(f=0;f<a.length;f++)if(e=this.deepSearch(a[f],b,c))return e}else{if(a.hasOwnProperty(b)&&a[b]==c)return a;for(d in a)if(a.hasOwnProperty(d)&&(a[d]instanceof Object||a[d]instanceof Array)&&(e=this.deepSearch(a[d],b,c)))return e}return e},arrayToObj:function(a,b){for(var c={},d=0;d<a.length;d++)c[a[d][b]]=a[d];return c},pickImageSize:function(a,b){if(!b||!a[0].sizes)return a;for(var c=0;c<a.length;c++){var d=a[c],e=null,f={width:0,height:0};for(var g in b)if(b.hasOwnProperty(g)){if(d.width.original>=d.height.original?(f.width=b[g],f.height=Math.floor(f.width*d.height.original/d.width.original)):(f.height=b[g],f.width=Math.floor(f.height*d.width.original/d.height.original)),f.width<d.width.adjusted||f.height<d.height.adjusted)continue;e=g;break}e||(e="full"),d.src=d.sizes[e]}return a},debounce:function(a,b,c){var d=null,e=null,f=null,g=null,h=null,i=Date.now||function(){return(new Date).getTime()},j=function(){var k=i()-g;b>k?d=setTimeout(j,b-k):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=i();var k=c&&!d;return d||(d=setTimeout(j,b)),k&&(h=a.apply(f,e),f=e=null),h}},logGalleryData:function(a){for(var b=[],c=0;c<a.length;c++)b.push({src:a[c].src,thumb:a[c].thumb,caption:a[c].caption,width:a[c].width.original,height:a[c].height.original});PhotoMosaic.Utils.log.info("Generate Gallery Data..."),PhotoMosaic.Utils.log.print(JSON.stringify(b))}}}(window.jQuery),PhotoMosaic.ErrorChecks=function(a){return{initial:function(a){if("xml"===a.input&&("string"!=typeof a.gallery||""===a.gallery))return PhotoMosaic.Utils.log.error("No XML file path specified."),!0;if("json"===a.input){if("string"==typeof a.gallery){if(""===a.gallery)return PhotoMosaic.Utils.log.error("No JSON object defined."),!0;if("undefined"==typeof window[a.gallery])return PhotoMosaic.Utils.log.error("No JSON object found when referencing '"+a.gallery+"'."),PhotoMosaic.Utils.log.info("Make sure your variable is avaible to the global scope (window['"+a.gallery+"']) or simply pass the object literal (gallery:"+a.gallery+') instead of a string (gallery:"'+a.gallery+'").'),!0;a.gallery=window[a.gallery]}if(0===a.gallery.length)return PhotoMosaic.Utils.log.error("Specified gallery data is empty."),!0}return a.prevent_crop&&"auto"!==a.height&&(PhotoMosaic.Utils.log.info("Height must be set to 'auto' to Prevent Cropping. The value for height ("+a.height+") is being ignored so as to prevent cropping."),a.height="auto"),!1},imageDimensions:function(b){var c=[];a.each(b,function(a){isNaN(this.height.adjusted)&&c.push(a)});for(var d=c.length-1;d>=0;d--){PhotoMosaic.Utils.log.error("The following image failed to load and was skipped.\n"+b[c[d]].src);var e=b.slice(c[d]+1);b.length=c[d],b.push.apply(b,e)}return b},layout:function(a){var b=0,c=0;for(b=0;b<a.columns.length;b++)for(c=0;c<a.columns[b].images.length;c++)if(a.columns[b].images[c].height.constraint<=0)return PhotoMosaic.Utils.log.error("Your gallery's height is too small for your current settings and won't render correctly."),!0;return!1}}}(jQuery),PhotoMosaic.Inputs=function(a){return{json:function(a){return a},html:function(a,b){for(var c=[],d=a.find("img"),e=0;e<d.length;e++){var f=d.eq(e),g={caption:f.attr("title"),alt:f.attr("alt"),width:parseInt(f.attr("width")),height:parseInt(f.attr("height"))};f.parent("a").length>0&&b.links?(g.src=f.attr("src"),g.url=f.parent("a").attr("href")):g.src=f.parent("a").length>0?f.parent("a").attr("href"):f.attr("src"),c.push(g)}return c},xml:function(b){var c=[];return b.find("photo").each(function(){var b={},d=a(this);b.caption=d.children("title").text(),b.alt=d.children("alt").text(),b.src=d.children("src").text(),b.thumb=d.children("thumb").text(),b.url=d.children("url").text(),b.width=d.children("width").text(),b.height=d.children("height").text(),c.push(b)}),c}}}(window.jQuery),function(a){var b=null;PhotoMosaic.Loader=function(c,d){return b=this,this.obj=c,this.images=c.find("img"),this.mosaic=d,this.opts=d.opts,this.opts.lazyload===!1?this.skipLazyload():(this.trigger_point=a.waypoints("viewportHeight")+this.opts.lazyload,this.lazyload()),"none"===this.opts.loading_transition||PhotoMosaic.Plugins.Modernizr.csstransitions||this.images.css("opacity","0"),this},PhotoMosaic.Loader.prototype={lazyload:function(){this.images.parent().waypoint({triggerOnce:!0,offset:this.trigger_point,handler:this.handler})},skipLazyload:function(){this.images.parent().each(function(){b.handler.apply(this)})},handler:function(){var c=a(this),d=c.children("img"),e=null;d.attr("src",d.attr("data-src")),e=new PhotoMosaic.Plugins.imagesLoaded(d.get(0)),e.on("progress",b.progress),e.on("fail",b.fail),e.on("always",b.always)},progress:function(c,d){setTimeout(function(){if("none"===b.opts.loading_transition||PhotoMosaic.Plugins.Modernizr.csstransitions){var c=a(d.img),e=c.parents("span.loading, a.loading"),f=function(){e.addClass("loaded"),c.off(b.mosaic._transition_end_event_name)};c.on(b.mosaic._transition_end_event_name,f),e.removeClass("loading")}else a(d.img).animate({opacity:"1"},1e3*b.opts.resize_transition_settings.duration,function(){a(this).parents("span.loading, a.loading").removeClass("loading")})},0)},fail:function(c){setTimeout(function(){var d="",e=null,f=0,g=0;for(f=0;f<c.images.length;f++)if(!c.images[f].isLoaded){for($node=a(c.images[f].img),d=$node.attr("id"),e=PhotoMosaic.Utils.deepSearch(b.mosaic.images,"id",d),g=0;g<b.mosaic.images.length;g++)b.mosaic.images[g]===e&&b.mosaic.images.splice(g,1);$node.parent().remove()}b.mosaic.refresh()},0)},always:function(){setTimeout(function(){var a=b.mosaic.obj.find(".photoMosaic"),c=a.children("a, span"),d=c.filter(".loading"),e=PhotoMosaic.Utils.debounce(function(){a.removeClass("loading").addClass("loaded"),b.mosaic.obj.off(b.mosaic._transition_end_event_name)},1e3);0==d.length&&b.mosaic.obj.on(b.mosaic._transition_end_event_name,e)},0)}}}(window.jQuery),function(a){PhotoMosaic.Layouts.Common={makeColumnBuckets:function(a){var b=[],c=0,d=0,e=0,f={},g=0;for(a.columns&&"auto"!==a.columns?c=a.columns:(d=a.width,e=a.gallery.length,f={plus:425,minus:175},c=d<f.plus?1:Math.floor(d/f.minus),c>e&&(c=e)),g=0;c>g;g++)b.push([]);return b},getColumnWidth:function(a,b){var c=a.length,d=b.padding*(c-1),e=b.width-d,f=Math.floor(e/c);return f},getColumnHeights:function(a,b,c){for(var d=[],e=0,f=null,g=0;g<b.length;g++){e=0;for(var h=0;h<b[g].length;h++)f=a[b[g][h]],e+=f.height.container;e+=(b[g].length-1)*c.padding,d.push(e)}return d},dealIntoColumns:function(a,b,c,d){switch(c.order){case"random":b=this.sortRandomly(a,b,d);break;case"masonry":b=this.sortIntoMasonry(a,b);break;case"columns":b=this.sortIntoColumns(a,b);break;case"rows":default:b=this.sortIntoRows(a,b)}return b},sortRandomly:function(a,b,c){return c||(a=this.randomizeImages(a)),b=this.sortIntoRows(a,b)},sortIntoMasonry:function(b,c){var d=c.length,e=b.length,f=[],g=0,h=0;for(h=0;d>h;h++)f[h]=0;for(h=0;e>h;h++)g=a.inArray(Math.min.apply(Math,f),f),c[g].push(b[h].id),f[g]=f[g]+b[h].height.container;return c},sortIntoRows:function(a,b){var c=b.length,d=a.length,e=0,f=0;for(f=0;d>f;f++)e=f%c,b[e].push(a[f].id);return b},sortIntoColumns:function(b,c){var b=a.extend(!0,[],b),d=(b.length,0),e=0;for(c=this.sortIntoRows(b,c),d=0;d<c.length;d++)for(e=0;e<c[d].length;e++)c[d][e]=b[0].id,b.shift();return c},randomizeImages:function(a){return a.sort(function(){return.5-Math.random()})},positionImagesInMosaic:function(a,b,c,d){for(var e=0,f=null,g=0;g<b.length;g++){e=0;for(var h=0;h<b[g].length;h++)f=a[b[g][h]],f.position={top:e,left:g*c+g*d.padding},e=e+f.height.container+d.padding}},normalizeAdjustments:function(a){return a.hasOwnProperty("top")||(a.top=0),a.hasOwnProperty("left")||(a.left=0),a}}}(window.jQuery),function(a){"use strict";PhotoMosaic.Layouts.columns=function(a){return this.node=a.obj,this.opts=a.opts,this._options=a._options,this._options.gallery=a.opts.gallery.slice(),this.images=a.opts.gallery,this.imagesById=PhotoMosaic.Utils.arrayToObj(this.images,"id"),this.isRefreshing=!1,this},PhotoMosaic.Layouts.columns.prototype={getData:function(){var a=this.images,b=null,c=null,d=0;return("auto"===this._options.width||0==this._options.width)&&(this.opts.width=this.node.width()),this.columns=b=PhotoMosaic.Layouts.Common.makeColumnBuckets(this.opts),this.column_width=c=PhotoMosaic.Layouts.Common.getColumnWidth(b,this.opts),a=this.scaleToWidth(a,c),b=PhotoMosaic.Layouts.Common.dealIntoColumns(a,b,this.opts,this.isRefreshing),d=this.getMosaicHeight(b),b=this.adjustColumnsToHeight(b,d),this.errorChecks.aspectRatio(a)&&(b=this.balanceColumnsToHeight(b,d)),this.errorChecks.height(a)?!1:(a=this.positionImagesInContainer(a),PhotoMosaic.Layouts.Common.positionImagesInMosaic(this.imagesById,b,c,this.opts),a=PhotoMosaic.Utils.pickImageSize(a,this.opts.sizes),this.isRefreshing=!1,{width:c*b.length+this.opts.padding*(b.length-1),height:d,images:a})},scaleToWidth:function(a,b){for(var c=0;c<a.length;c++)a[c].width.container=a[c].width.adjusted=b,a[c].height.container=a[c].height.adjusted=Math.floor(a[c].height.original*b/a[c].width.original);return a},getMosaicHeight:function(a){function b(a){var b=0,c=0;for(c=0;c<a.length;c++)b+=a[c];return Math.ceil(b/a.length)}if(this.opts.height&&"auto"!==this.opts.height)return this.opts.height;var c=PhotoMosaic.Layouts.Common.getColumnHeights(this.imagesById,a,this.opts);return this.opts.prevent_crop?Math.max.apply(Math,c):b(c)},adjustColumnsToHeight:function(a,b){if(this.opts.prevent_crop)return a;for(var c=0;c<a.length;c++)a[c]=this.adjustColumnToHeight(a[c],b);return a},adjustColumnToHeight:function(a,b){var c=0,d=0;for(d=0;d<a.length;d++)c+=this.imagesById[a[d]].height.container;c+=(a.length-1)*this.opts.padding;var e=b-c,f=e>0?"grow":"shrink";for(e=Math.abs(e),d=0;e>0;)d=d>=a.length?0:d,"grow"===f?this.imagesById[a[d]].height.container++:this.imagesById[a[d]].height.container--,d++,e--;return a},balanceColumnsToHeight:function(a,b){if(this.opts.prevent_crop)return a;for(var c=0;c<a.length;c++)a[c]=this.balanceColumnToHeight(a[c],b);return a},balanceColumnToHeight:function(a,b){for(var c=b-(a.length-1)*this.opts.padding,d=Math.floor(c/a.length),e=c%a.length,f=0;f<a.length;f++)this.imagesById[a[f]].height.container=d;for(var f=0;e>f;f++)this.imagesById[a[f]].height.container++;return a},positionImagesInContainer:function(a){for(var b=null,c=0;c<a.length;c++)b=a[c],b.adjustments={},this.opts.prevent_crop||(b.height.adjusted>b.height.container?b.adjustments.top=Math.floor((b.height.adjusted-b.height.container)/2):(b.width.adjusted=Math.floor(b.width.adjusted*b.height.container/b.height.adjusted),b.height.adjusted=b.height.container,b.adjustments.left=Math.floor((b.width.adjusted-b.width.container)/2))),b.adjustments=PhotoMosaic.Layouts.Common.normalizeAdjustments(b.adjustments),a[c]=b;return a},refresh:function(){return this.isRefreshing=!0,this.getData()},update:function(b){this.opts=a.extend({},this.opts,b),b.hasOwnProperty("order")&&(this.images=this._options.gallery.slice(),"random"==b.order&&(this.images=PhotoMosaic.Layouts.Common.randomizeImages(this.images))),b.hasOwnProperty("width")&&(this._options.width=b.width,("auto"===b.width||0==b.width)&&(this.opts.width=this.node.width()))},errorChecks:{aspectRatio:function(a){for(var b=0;b<a.length;b++)if(a[b].height.container<=10)return PhotoMosaic.Utils.log.error("Your gallery's height doesn't allow your images to proportioned based on their aspect ratios."),!0;return!1},height:function(a){for(var b=0;b<a.length;b++)if(a[b].height.container<=0)return PhotoMosaic.Utils.log.error("Your gallery has been hidden because its height is too small for your current settings and won't render correctly."),!0;return!1}}}}(window.jQuery),function(a){PhotoMosaic.Layouts.grid=function(a){return this.node=a.obj,this.opts=a.opts,this._options=a._options,this._options.gallery=a.opts.gallery.slice(),this.images=a.opts.gallery,this.imagesById=PhotoMosaic.Utils.arrayToObj(this.images,"id"),this.isRefreshing=!1,this},PhotoMosaic.Layouts.grid.prototype={getData:function(){var a=this.images,b=null,c=null,d=0;return("auto"===this._options.width||0==this._options.width)&&(this.opts.width=this.node.width()),this.columns=b=PhotoMosaic.Layouts.Common.makeColumnBuckets(this.opts),this.column_width=c=PhotoMosaic.Layouts.Common.getColumnWidth(b,this.opts),a=this.setContainers(a,c),a=this.scaleToContainer(a),b=PhotoMosaic.Layouts.Common.dealIntoColumns(a,b,this.opts,this.isRefreshing),d=this.getMosaicHeight(this.imagesById,b,this.opts),a=this.alignInContainer(a),PhotoMosaic.Layouts.Common.positionImagesInMosaic(this.imagesById,b,c,this.opts),a=PhotoMosaic.Utils.pickImageSize(a,this.opts.sizes),this.isRefreshing=!1,{width:c*b.length+this.opts.padding*(b.length-1),height:d,images:a}},setContainers:function(a,b){for(var c=null,d=null,e=0;e<a.length;e++)c=a[e],d=this.getAspectRatio(this.opts.shape,c),c.width.container=b,c.height.container=Math.floor(d[1]*b/d[0]),a[e]=c;return a},scaleToContainer:function(a){for(var b=null,c=null,d=0;d<a.length;d++)b=a[d],c=Math.floor(b.height.original*b.width.container/b.width.original),this.shouldScaleWidth(b)?(b.width.adjusted=b.width.container,b.height.adjusted=Math.floor(b.height.original*b.width.adjusted/b.width.original)):(b.height.adjusted=b.height.container,b.width.adjusted=Math.floor(b.width.original*b.height.adjusted/b.height.original));return a},getMosaicHeight:function(a,b,c){var d=PhotoMosaic.Layouts.Common.getColumnHeights(a,b,c);return Math.max.apply(Math,d)},alignInContainer:function(a){for(var b=null,c=0;c<a.length;c++){if(b=a[c],b.adjustments={},this.shouldScaleWidth(b)?b.adjustments.top=Math.floor((b.height.adjusted-b.height.container)/2):b.adjustments.left=Math.floor((b.width.adjusted-b.width.container)/2),"contain"==this.opts.sizing)switch(this.opts.align){case"top":b.adjustments.top=0;break;case"middle":b.adjustments.top=-1*Math.floor((b.height.container-b.height.adjusted)/2);break;case"bottom":b.adjustments.top=-1*(b.height.container-b.height.adjusted)}b.adjustments=PhotoMosaic.Layouts.Common.normalizeAdjustments(b.adjustments),a[c]=b}return a},getAspectRatio:function(a){var b=null;return b="natural"==a||this.errorChecks.shape(a)?[1,1]:a.split(":")},shouldScaleWidth:function(a){var b=Math.floor(a.height.original*a.width.container/a.width.original);return"cover"==this.opts.sizing&&b>a.height.container||"contain"==this.opts.sizing&&b<a.height.container},refresh:function(){return this.isRefreshing=!0,this.getData()},update:function(b){this.opts=a.extend({},this.opts,b),b.hasOwnProperty("order")&&(this.images=this._options.gallery.slice(),"random"==b.order&&(this.images=PhotoMosaic.Layouts.Common.randomizeImages(this.images))),b.hasOwnProperty("width")&&(this._options.width=b.width,("auto"===b.width||0==b.width)&&(this.opts.width=this.node.width()))},errorChecks:{shape:function(a){return"natural"!=a&&a.indexOf(":")<=0?(PhotoMosaic.Utils.log.error("'shape' must be 'natural' or an aspect ratio in the form 'x:y'. "),!0):!1}}}}(window.jQuery),function(a){"use strict";function b(a){return"photoMosaic_"+a}PhotoMosaic.Layouts.React={mosaic:React.createClass({componentDidMount:function(){a(this.getDOMNode()).addClass("loading")},render:function(){var a=b(this.props.id),c="photoMosaic "+this.props.class_name,d={width:this.props.width,height:this.props.height},e=this.props.images.map(function(a){return PhotoMosaic.Layouts.React.image_wrapper(a)});return this.props.center&&(d["margin-right"]="auto",d["margin-left"]="auto"),React.DOM.div({id:a,className:c,style:d,children:e})}}),image_wrapper:React.createClass({componentDidMount:function(){a(this.getDOMNode()).addClass("loading")},render:function(){var b=this.props,c=b.link?"a":"span",d={className:"photomosaic-item",key:b.id,style:{position:"absolute",top:b.position.top,left:b.position.left,width:b.width.container,height:b.height.container},children:[PhotoMosaic.Layouts.React.spinner(a.extend({},b,{key:b.id+"_spinner"})),PhotoMosaic.Layouts.React.image(b)]};return b.link&&(b.external&&(d.target="_blank"),b.modal&&(d.rel=b.modal),b.caption&&(d.title=b.caption),d.href=b.path),React.DOM[c](d)}}),image:React.createClass({render:function(){var a=this.props,b={width:a.width.adjusted,height:a.height.adjusted};for(var c in a.adjustments)b[c]=-1*a.adjustments[c];return React.DOM.img({id:a.id,"data-src":a.src,title:a.caption,alt:a.alt,style:b})}}),spinner:React.createClass({render:function(){var a=this.props,b={width:a.width.adjusted,height:a.height.adjusted};for(var c in a.adjustments)b[c]=-1*a.adjustments[c];return React.DOM.span({className:"photomosaic-spinner",style:b})}}),loading:React.createClass({render:function(){return React.DOM.div({id:b(this.props.id),className:"photoMosaic",children:React.DOM.div({className:"photoMosaicLoading",children:"loading gallery..."})})}})}}(window.jQuery),function(a){"use strict";var b,c="photoMosaic",d=function(c,d){b=this,this.el=c,this.obj=a(c),this._options=d,this._id=PhotoMosaic.Utils.makeID(!0),this._transition_end_event_name=function(){var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};return a[PhotoMosaic.Plugins.Modernizr.prefixed("transition")]}(),this.init()};d.prototype={_defaults:{input:"json",gallery:"PMalbum",padding:2,columns:"auto",width:"auto",height:"auto",links:!0,external_links:!1,order:"rows",center:!0,prevent_crop:!1,show_loading:!1,loading_transition:"fade",resize_transition:!0,resize_transition_settings:{time:0,duration:.3,effect:"easeOut"},modal_name:null,modal_group:!0,modal_hash:null,modal_ready_callback:null,lazyload:0,layout:"columns",shape:"16:9",sizing:"contain",align:"middle",orphans:"left",log_gallery_data:!1},init:function(){var b=this;this.opts=a.extend({},this._defaults,this._options),this.opts=this.adjustDeprecatedOptions(this.opts),this._options=a.extend(!0,{},this.opts),this.preload="PM_preloadify"+this._id,PhotoMosaic.ErrorChecks.initial(this.opts)||a.when(this.getGalleryData()).then(function(a){b.opts.gallery=b.setImageIDs(a),b.configure()})},configure:function(){this.opts.show_loading&&(this.react=React.renderComponent(PhotoMosaic.Layouts.React.loading({id:this._id}),this.obj.get(0))),this.hasDims()?(this.opts.gallery=this.prepData(this.opts.gallery),this.render()):a.when(this.preloadify()).then(a.proxy(this.preloadDone,this),a.proxy(this.preloadDone,this),a.proxy(this.preloadProgress,this))},render:function(){var b=this,c=null,d=null,e={id:this._id,class_name:this.makeSpecialClasses(),center:this.opts.center};PhotoMosaic.ErrorChecks.initial(this.opts)||(this.layout=new PhotoMosaic.Layouts[this.opts.layout](this),c=this.layout.getData(),d=a.extend({},e,c),this.react=React.renderComponent(PhotoMosaic.Layouts.React.mosaic(d),this.obj.get(0),function(){b.loader=new PhotoMosaic.Loader(b.obj,b),a(window).unbind("resize.photoMosaic"+b._id).bind("resize.photoMosaic"+b._id,function(){b.refresh()}),b.modalCallback()}),this.opts.log_gallery_data&&PhotoMosaic.Utils.logGalleryData(this.opts.gallery))},preloadify:function(){var b=a("<div>").attr({id:this.preload,"class":"PM_preloadify"});return a.each(this.opts.gallery,function(){var c=this.thumb&&""!==this.thumb?this.thumb:this.src,d=a("<img>").attr({src:c}).addClass(this.id);b.append(d)}),a("body").append(b),b.imagesLoaded()},preloadDone:function(){this.opts.gallery=this.prepData(this.opts.gallery,!0),this.render()},preloadProgress:function(a,b){if(!b.isLoaded){for(id=b.img.className,i=0;i<this.opts.gallery.length;i++)this.opts.gallery[i].id==id&&this.opts.gallery.splice(i,1);PhotoMosaic.Utils.log.error("The following image failed to load and was skipped.\n"+b.img.src)}},prepData:function(b,c){var d=this,e=a("#"+this.preload),f=null,g=null,h="",i="",j={},k=[];return a.each(b,function(){g=a.extend(!0,{},this),c?(f=f=e.find("."+this.id),j={w:f.width(),h:f.height()}):j={w:parseInt(this.width),h:parseInt(this.height)},g.width={original:j.w},g.height={original:j.h},h=g.thumb&&""!==g.thumb?g.thumb:g.src,g.full=g.src,g.src=h,g.padding=d.opts.padding,d.opts.modal_name&&(i=d.opts.modal_group?d.opts.modal_hash?d.opts.modal_name+"["+d.opts.modal_hash+"]":d.opts.modal_name+"["+d._id+"]":d.opts.modal_name,g.modal=i),d.opts.links&&g.url?(g.link=!0,g.path=g.url,g.external=d.opts.external_links):d.opts.links?(g.link=!0,g.path=g.full,g.external=d.opts.external_links):g.link=!1,k.push(g)}),k},getGalleryData:function(){return"json"===this.opts.input?PhotoMosaic.Inputs.json(this.opts.gallery):"html"===this.opts.input?PhotoMosaic.Inputs.html(this.obj,this.opts):"xml"===this.opts.input?a.when(a.get(this.opts.gallery)).then(function(b){return a(b).find("photos").length>0?PhotoMosaic.Inputs.xml(a(b).find("photos")):void PhotoMosaic.Utils.log.error("The XML doesn't contain any <photo> nodes.")},function(){PhotoMosaic.Utils.log.error("The XML either couldn't be found or was malformed.")}):void 0},setImageIDs:function(a){for(var b=0;b<a.length;b++)a[b].key=a[b].id=PhotoMosaic.Utils.makeID(!1,"pm");return a},hasDims:function(){var a=!1,b=!0;if(void 0!==this.hasSpecifiedDims)return this.hasSpecifiedDims;for(var c=0;c<this.opts.gallery.length;c++)this.opts.gallery[c].hasOwnProperty("width")&&this.opts.gallery[c].hasOwnProperty("height")?isNaN(parseInt(this.opts.gallery[c].width))||isNaN(parseInt(this.opts.gallery[c].height))||0==this.opts.gallery[c].width||0==this.opts.gallery[c].height?b=!1:a=!0:b=!1;return a&&!b&&PhotoMosaic.Utils.log.error("Width / Height data not present for all images."),this.hasSpecifiedDims=b,this.hasSpecifiedDims},getLoadingTransition:function(){var a="none";return PhotoMosaic.Plugins.Modernizr.csstransitions&&PhotoMosaic.Plugins.Modernizr.csstransforms&&this.opts.loading_transition!==!1&&(a=this.opts.loading_transition),"loading-transition-"+a},getResizeTransition:function(){return this.opts.resize_transition?"":"resize-transition-none"},getLayoutClass:function(){return"layout-"+this.opts.layout+("grid"==this.opts.layout?"-"+this.opts.sizing:"")},getUniqueClass:function(){return this.opts.modal_hash?"photomosaic-"+this.opts.modal_hash:""},getAvia:function(){return"undefined"!=typeof window.avia_framework_globals?"noLightbox":""},makeSpecialClasses:function(){var a=[this.getUniqueClass(),this.getLoadingTransition(),this.getResizeTransition(),this.getLayoutClass(),this.getAvia()];return a.join(" ")},refresh:function(){var b=this,c={id:this._id,class_name:this.makeSpecialClasses(),center:this.opts.center},d=this.layout.refresh(),e=a.extend({},c,d),f=PhotoMosaic.Utils.debounce(function(){a.waypoints("refresh")},300);b.react.setProps(e,function(){PhotoMosaic.Plugins.Modernizr.csstransitions&&b.opts.lazyload!==!1&&b.obj.on(b._transition_end_event_name,f)})},update:function(b){return"object"!=typeof b?(PhotoMosaic.Utils.log.error("The 'update' method accepts an object of parameters to be updated."),!1):(this.opts=a.extend({},this.opts,b),b.hasOwnProperty("layout")?this.layout=new PhotoMosaic.Layouts[this.opts.layout](this):this.layout.update(b),void this.refresh())},modalCallback:function(){var b=this.obj.children().get(0);a.isFunction(this.opts.modal_ready_callback)&&this.opts.modal_ready_callback.apply(this,[b])},adjustDeprecatedOptions:function(a){return a.random&&(a.order="random"),a.force_order&&(a.order="columns"),a.hasOwnProperty("responsive_transition")&&(a.resize_transition=a.responsive_transition),a.hasOwnProperty("responsive_transition_settings")&&(a.resize_transition_settings=a.responsive_transition_settings),a},_name:c,version:PhotoMosaic.version},a.fn[c]=function(b){return this.each(function(){var e=a.data(this,c);e&&b?e.update(b):e?e.refresh():(b=b||{},e=a.data(this,c,new d(this,b)),window.PhotoMosaic.$=a,window.PhotoMosaic.Mosaics.push({el:this,$el:a(this),opts:b,instance:e}))})}}(window.jQuery);
//# sourceMappingURL=photomosaic-wo-react.min.map